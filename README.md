# Лабораторные работы 4, 5  -  Карданова Екатерина 

* **Цель:** научиться реализовывать пользовательские коллекции, работать с классами
* **Библиотеки:** *Unittest*, *random*
* **Чему я научилась:**
    - создавать базовые классы
    - создавать списковые коллекции и работать с ними
    - создавать словарные коллекции и работать с ними
    - создавать производные классы
    - использовать random


## Структура проекта

 <pre>
    .
    ├── lab-4            # Кодовая база вашей лабораторной работы
    │   ├── src/                               # Исходный код
    |   │   ├── main.py                        # Часть пользователя 
    |   │   ├── book_class.py                  # Класс Book
    |   │   ├── book_collection.py             # Класс Book collection
    |   │   ├── IndexCollection.py             # Класс Index collection
    |   │   ├── Library.py                     # Класс Library
    |   │   ├── simul_functions.py             # Вспомогательные функции для симуляции
    |   │   ├── simulation.py                  # Функция симуляции 
    |   │   ├── author_list.txt                # Список авторов для симуляции
    |   │   ├── book_list.txt                  # Список книг для работы симуляции
    │   ├── tests/                             # Unit тесты
    |   │   ├── test_book.py                   # Тесты класса Book
    |   │   ├── test_book_collection.py        # Тесты класса Book collection
    |   │   ├── test_index_collection.py       # Тесты класса Index collection
    |   │   ├── test_library.py                # Тесты класса Library
    |   │   ├── test_simulation.py             # Тесты работы симуляции 
    │   ├── uv.lock                            # зависимости вашего проекта
    │   ├── LAB-5.md                           # Лабораторная работа 5
    │   ├── .gitignore                         # git ignore файл
    │   ├──.pre-commit-config.yaml             # Средства автоматизации проверки кодстайла
    │   ├── README.md                          # Описание вашего проекта, с описанием файлов и с титульником о том,
                                               # что и какая задача
</pre>

## Инструкция к использованию

### Установить репозиторий
```pip install -e git+https://github.com/TinaGrav/lab-4-python``` \
```cd src/lab-4-python```

### Запустить
```python -m src.main```
После запуска программы пользователь увидит приветсвенное сообщение и инструкцию по работе с программой. 

# Допущения
- Пользователь вводит количество шагов симуляции, которые будут выполнены
- На выбор может выполнится одно из следующих действий: добавление новой ĸниги, удаление случайной ĸниги, поисĸ по рандомному автору, обновление индеĸса, попытĸа получить ĸнигу, ĸоторой нет
- При выпадании действия "попытĸа получить ĸнигу, ĸоторой нет" работа программы завершается, так как появляется ошибка обращения к несуществующей книге
- Книги, которые могут появиться в библиотеке во время работы симуляции хранятся в book_list.txt, авторы этих книг в author_list.txt
- Вероятность каждого случайно выпадающего события одинакова
- Несуществующая книга, которую пытается получить пользователь при выпадении последнего события, определена заранее



# Алгоритм работы
При запуске программы пользователь вводит количество шагов симуляции, которые будут выполнены. После этого выполняются один за одним действия, которые могут быть выполнены при запуске симуляции. Добавление новой книги добавляет одну рандомную книгу из book_list.txt в IndexCollection и BookCollection, выводит сообщение о том, какая книга была добавлена. Удаление случайной книги - удаляет случайно одну из книг, содержащуюся в IndexCollection и BookCollection, если в библиотеке нет книг - сообщает об этом пользователю. Поиск по автору - выбирает одного случайного автора из author_list.txt и ищет книгу его авторства в IndexCollection, если такой книги нет - сообщает об этом пользователю. Обновление индекса - выводит пользователю коллекцию индексов, поскольку индексы обновляются автоматически при добавлении новой книги. Попытĸа получить ĸнигу, ĸоторой нет - проверĸа обработĸи, выводит ошибку, если пользователь пытается получить несуществующую книгу. 

В начале работы программа обращается к функции run_simulation

```run_simulation``` - Функция, которая на рандом выбирает одно число от 0 до 4 и в зависимости от выпавшего числа выполняет ту или иную команду. run_simulation обращается к функциям add_book, remove_book, search_book, new_index, unexisting_book


```add_book``` - Функция, которая на рандом выбирает одну из книг в book_list.txt и добавляет её в IndexCollection и BookCollection

```remove_book``` - Функция, которая случайно выбирает одну из книг в BookCollection и удаляет её из IndexCollection и BookCollection

```search_book``` - Функция, которая случайно выбирает одного автора в author_list.txt и ищет книги этого автора в IndexCollection

```new_index``` - Функция, которая выводит состояние IndexCollection в данный момент

```unexisting_book``` - Функция, которая выводит состояние IndexCollection в данный момент

Каждая из этих функций использует класс Library 

```Library``` - Класс-библиотека, содержащий в себе IndexCollection и BookCollection, а также методы для поиска книг search_by_year, search_by_author, search_by_isbn - поиск по году, автору и isbn книги. Класс является наследственным от классов IndexCollection и BookCollection, может использовать методы из этих классов. 

```IndexCollection``` - Класс, используемый для работы с пользовательской словарной коллекцией для индексов. Работает с тремя словарями - словарь с авторами, годами написания книг, isbn. В нем есть методы add - добавление книги в три словаря, remove - удаляет заданную книгу, если она есть в словарях, __repr__ - метод для отображения книг в необходимом формате, len_isbn, len_author, len_year - методы нахождения длины необходимого словаря. 

```BookCollection``` - Класс, используемый для работы с пользовательской списковой коллекцией для книг. Использует методы __getitem__ - для просмотра конкретного элемента, __iter__ - для последовательного просмотра элементов, __len__ - для нахождения длины списка, add_col - для добавления книги в коллекцию, remove_col - для удаления книги из коллекции, __repr__ и __str__, используемые для отображения коллекции книг в необходимом формате.

```Book``` - Класс для работы с книгами. Позволяет работать отдельно с автором, годом издания, названием книги, isbn. В нем есть методы __repr__ и __str__, используемые для отображения книги в необходимом формате.
